
# つぎへ (Tsugi e) — MVP 启动文档 v0.1

## 一、项目概述

**产品名称**：つぎへ (Tsugi e)  
**Slogan**：最聪明的へ导航

### 产品定位

つぎへ 是一款基于地理位置与时间判断的移动应用。  
它的核心不是信息展示，而是：

> 在当前时间与当前地点条件下，为用户提供“下一站值得去的へ（可前往地点）”。

核心原则：

- 打开即用
- 无需登录
- 地图为核心入口
- 决策优先
- 简洁、克制表达

---

## 二、MVP 目标

MVP（Minimum Viable Product）的目标：

- 用最小功能验证产品核心价值
- 控制范围，快速上线
- 获取真实用户反馈

MVP 不追求复杂，不追求完整，只追求可用。

---

## 三、核心功能范围

### 3.1 首页地图（核心）

- 自动获取定位
- 首屏即地图
- 显示附近可用「へ」标记
- 标记展示名称使用地点真实名称（活动名/祭典名/地点名），不使用“xxxへ”后缀
- 默认不弹出卡片，保持地图全屏

### 3.2 今日推荐（基础排序）

排序逻辑（MVP 版本）：

1. 今日优先
2. 距离优先
3. 规模优先

系统仅输出一个“最速攻略へ”。

推荐卡片展示：

- へ名称
- 距离
- 开始时间
- 倒计时
- 简短推荐语
- （进入一定时间后）自动从底部弹出“最速攻略”卡片

### 3.3 地图交互

- 点击标记 → 弹出操作气泡（支持收藏 / 打卡，并可进入快速查看）
- 页面进入一段时间后 → 自动弹出“最速攻略”卡片
- 上滑卡片 → 进入详情页

### 3.4 详情页

包含：

- へ名称
- 日期时间
- 距离
- 规模
- 最近车站
- 一句推荐语
- 一键导航按钮

### 3.5 时间筛选

- Today
- This Week

### 3.6 时间维度日历（時めぐり）

- 首页右上角提供“时めぐり”入口，进入全屏日历页
- 日历语义：按时间维度统计当天可去的 `へ`
- 地图语义：首页按位置维度展示附近可去的 `へ`
- 日历页为独立页面切换，不以主页面板叠加方式实现
- 切换到日历页时不修改主页组件状态（`quickCard` / `nearbyCarousel` / `detailPanel` 等）
- 关闭日历返回主页时恢复到进入日历前的主页状态
- 每天默认仅展示“离自己最近且开始最快”的 2 条
- 每天右上角显示类别统计（如：花火大会/祭典等）
- 点击某一天后，从右侧抽屉弹出该天 `へ` 列表
- 抽屉内按类别过滤，默认“全部”，排序与推荐顺序一致（距离优先 + 开始优先）
- 涉及类别展示的区域需预留 logo 占位（测试阶段可使用占位图形/符号）

### 3.7 本地通知

- 支持开始前提醒
- 无需登录即可使用

### 3.8 领域抽象（へ）

- `へ` 定义为“可前往地点”的统一业务对象
- 花火大会是首个垂类（`heType=hanabi`），但不是唯一垂类
- 组件命名与流程设计不得硬编码“花火大会”，需为后续 `music / food / night-view / onsen` 等类型保留扩展位

### 3.9 收藏与打卡联动

- 收藏语义：想要访问（将该 `へ` 放入“行きたい栞”）
- 打卡语义：已经访问（留下“足あと”）
- 地图点位交互：
  - 点位点击后先弹出操作气泡
  - 气泡内支持收藏/打卡切换（logo 交互）
- 状态展示统一：
  - 所有地点卡片（quickcard、详情页、日历某日抽屉、附近轮播、收藏抽屉）均展示收藏与打卡状态
  - 状态表达仅使用 logo，不使用“已收藏/已打卡”等文字
- 侧栏收藏架构：
  - 右侧主侧栏点击“行きたい栞”后，收藏列表不在右侧内容区下方展开
  - 从左侧再弹出“收藏抽屉”承载收藏列表
  - 收藏抽屉支持“全部 / 未打卡 / 已打卡”筛选
- 文案风格：
  - 与该功能相关的新增文案统一采用日文在地化表达（偏诗意、克制）

---

## 四、明确不做（MVP 阶段）

- 不做账号系统
- 不做用户登录
- 不做社交功能
- 不做评论系统
- 不做复杂算法
- 不做摄影增强
- 不做路径优化
- 不做支付与订阅

---

## 五、产品结构

App 启动  
→ 地图页（自动定位）  
→ 点击标记后显示快速查看卡片  
→ 详情页  

仅三层结构，保持极简。

---

## 六、UI 原则

- 普通模式默认使用清新渐变色（深色可作为扩展主题）
- 地图为视觉核心
- 信息卡片层级清晰
- 文案克制简洁

示例文案风格：

- 今晚最近的へ离你不远。
- 现在出发正合适。
- 这是一条值得马上动身的路线。

---

## 七、技术栈

### 客户端

- Swift
- SwiftUI
- Combine
- MapKit

### 工具环境

- Xcode
- iOS Simulator
- 真机测试
- TestFlight（内测）
- Codex（开发辅助）
- ChatGPT（设计与逻辑辅助）

---

## 八、开发节奏（8 周）

Week 1  
- 项目初始化
- 定位与地图基础

Week 2  
- 地图标记与 Mock 数据

Week 3  
- 推荐排序逻辑
- 推荐卡片 UI

Week 4  
- 详情页
- 导航跳转

Week 5  
- 时间筛选
- 本地通知

Week 6  
- Bug 修复
- 性能优化

Week 7  
- TestFlight 内测

Week 8  
- 上架准备
- 提交审核

---

## 九、成功验证指标

- 用户是否点击“今日推荐”
- 地图交互是否频繁
- 快速查看卡片触达率
- 通知开启率

---

## 十、第一阶段纪律

- 不扩功能
- 不提前优化
- 不增加复杂逻辑
- 不做多语言

第一阶段目标只有一个：

> 完成一个真正可用的产品。

---

つぎへ 是一个关于“下一步”的产品。  
它不解释世界，只给出一个方向。
